{"version":3,"sources":["dist/angular-websocket.js"],"names":["_interopRequireDefault","obj","__esModule","default","$WebSocketProvider","$rootScope","$q","$timeout","$websocketBackend","$WebSocket","url","protocols","options","isObject","isArray","undefined","this","ssl","test","scope","rootScopeFailover","useApplyAsync","initialTimeout","maxTimeout","reconnectIfNotNormalClose","binaryType","_reconnectAttempts","sendQueue","onOpenCallbacks","onMessageCallbacks","onErrorCallbacks","onCloseCallbacks","objectFreeze","_readyStateConstants","_connect","_setInternalState","prototype","CONNECTING","OPEN","CLOSING","CLOSED","RECONNECT_ABORTED","_normalCloseCode","_reconnectableStatusCodes","safeDigest","autoApply","$$phase","$digest","bindToScope","self","$on","force","socket","readyState","create","onmessage","_angular2","bind","_onMessageHandler","onopen","_onOpenHandler","onerror","_onErrorHandler","onclose","_onCloseHandler","fireQueue","length","data","shift","send","isString","message","JSON","stringify","deferred","resolve","notifyOpenCallbacks","event","i","call","notifyCloseCallbacks","notifyErrorCallbacks","onOpen","cb","push","onClose","onError","onMessage","callback","isFunction","Error","isDefined","filter","RegExp","fn","pattern","$applyAsync","code","indexOf","reconnect","applyAsyncOrDigest","args","arraySlice","arguments","apply","currentCallback","exec","close","bufferedAmount","cancelableify","promise","cancel","then","reason","splice","reject","defer","isMocked","isConnected","mockSend","backoffDelay","_getBackoffDelay","backoffDelaySeconds","console","log","attempt","R","Math","random","T","N","M","floor","min","pow","state","objectDefineProperty","_internalConnectionState","forEach","pending","get","set","$WebSocketBackendProvider","$log","Socket","createWebSocketBackend","warn","Object","defineProperty","exports","value","_angular","require","window","WebSocket","MozWebSocket","noop","freeze","Array","slice","elt","len","from","Number","ceil","module","factory","service"],"mappings":"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"}